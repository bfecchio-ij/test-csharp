@model InfoJobs.Domain.Entities.CandidateExperience

@{
    ViewData["Title"] = "Details of experiences ||";
}

<a asp-action="ViewCandidate" asp-route-id="@Model.IdCandidate">Back to Candidate</a>

<div>

    <div class="card">
        <!-- Card header -->
        <div class="card-header">
            <h4 class="fw-bold">Experience Informations</h4>
        </div>

        <!-- Card body -->
        <div class="card-body">
            <div style="display:flex;">
                <img src="https://ncdn0.infojobs.com.br/logos/Company_Evaluation/68798.jpg"
                     alt=""
                     style="width:300px; height: 200px; margin-right: 30px; margin-bottom:20px" />
                <div class="row" style="display:flex; flex-direction: column; align-items: center">
                    <dl class="row">
                        <dt class="col-sm-2">
                            @Html.DisplayNameFor(model => model.Company)
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(model => model.Company)
                        </dd>
                        <dt class="col-sm-2">
                            @Html.DisplayNameFor(model => model.Job)
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(model => model.Job)
                        </dd>
                        <dt class="col-sm-2">
                            @Html.DisplayNameFor(model => model.Description)
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(model => model.Description)
                        </dd>
                        <dt class="col-sm-2">
                            @Html.DisplayNameFor(model => model.Salary)
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(model => model.Salary)
                        </dd>
                        <dt class="col-sm-2">
                            @Html.DisplayNameFor(model => model.BeginDate)
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(model => model.BeginDate)
                        </dd>
                        <dt class="col-sm-2">
                            @Html.DisplayNameFor(model => model.EndDate)
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(model => model.EndDate)
                        </dd>
                        <dt class="col-sm-2">
                            @Html.DisplayNameFor(model => model.InsertDate)
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(model => model.InsertDate)
                        </dd>
                        <dt class="col-sm-2">
                            @Html.DisplayNameFor(model => model.ModifyDate)
                        </dt>
                        <dd class="col-sm-10">
                            @Html.DisplayFor(model => model.ModifyDate)
                        </dd>
                    </dl>
                </div>

            </div>


            <!-- Card footer -->
            <div class="card-footer" style="margin-left:-20px">
                <button type="button" data-toggle="modal" data-target="#exampleModalLong" class="btn btn-primary">Update Experience</button>
                <a asp-action="DeleteExperience" asp-route-id="@Model.Id" type="button" class="btn btn-secondary">Delete Experience</a>
            </div>
        </div>

    </div>

    <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Update Experience: @Model.Company</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form asp-action="ViewCandidate" asp-route-id="@Model.IdCandidate" method="POST">

                        <label for="Company" class="control-label">Company</label>
                        <input style="margin: 10px 0px;width: 300px;height: 35px" id="company" class="form-control" type="text" value="@Model.Company" name="Company" />
                        <span for="Company" class="text-danger"></span>

                        <label for="Job" class="control-label">Job</label>
                        <input style="margin: 10px 0px;width: 300px;height: 35px" id="job" class="form-control" type="text" value="@Model.Job" name="Job" />
                        <span for="Job" class="text-danger"></span>

                        <label for="Description" class="control-label">Description</label>
                        <textarea style="margin: 10px 0px;width: 300px;height: 100px;" class="form-control" id="description" name="Description">@Model.Description</textarea>
                        <span for="Description" class="text-danger"></span>

                        <label for="Salary" class="control-label">Salary</label>
                        <input style="margin: 10px 0px;width: 300px;height: 35px" id="salary" class="form-control" type="text" value="@Model.Salary" name="Salary" />
                        <span for="Salary" class="text-danger"></span>

                        <label for="BeginDate" class="control-label">Begin Date</label>
                        <input style="margin: 10px 0px;width: 300px;height: 35px" id="beginDate" class="form-control" type="datetime" value="@Model.BeginDate" name="BeginDate" />
                        <span for="BeginDate" class="text-danger"></span>

                        <label for="EndDate" class="control-label">End Date</label>
                        <input style="margin: 20px 0px;width: 300px;height: 35px" id="endDate" class="form-control" type="datetime" value="@Model.EndDate" name="EndDate" />
                        <span for="EndDate" class="text-danger"></span>



                        <input type="hidden" id="idCandidate" value="@Html.DisplayFor(model => model.IdCandidate)" name="IdCandidate" />
                        <input type="hidden" id="idExperience" value="@Model.Id" name="IdExperience" />

                        <div style="display: flex;flex-direction: row;width: 100%;height:auto;">
                            <button style="border:none; padding: 8px 10px;margin-bottom: 20px" class="btn btn-primary" id="btnAdicionar" type="submit">Update</button>
                        </div>

                    </form>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div>
    
</div>


@section Scripts{
    <script>
        $("#btnAdicionar").click(function () {
            var dataExperience = {
                Id: $("#idExperience").val(),
                Company: $("#company").val(),
                Job: $('#job').val(),
                Description: $("#description").val(),
                Salary: $("#salary").val(),
                BeginDate: $("#beginDate").val(),
                EndDate: $("#endDate").val()
            }
         var URL = '@Url.Action("UpdateExperience")'
                $.ajax({
                    url: URL,
                    type: "Put",
                    data: dataExperience,
                    success: function (dados) {
                            $("#company").val('')
                            $("#job").val('')
                            $("#description").val('')
                            $("#salary").val('')
                            $("#beginDate").val('')
                            $("#endDate").val('')
                    }
                });
        });
    </script>
}